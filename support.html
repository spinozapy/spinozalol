<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.7 user-scalable=no" />
    <meta property="og:title" content="Support">
    <meta property="og:image" content="https://killwith.fun/img/support.png">
    <meta property="og:site_name" content="killwith.fun">
    <meta property="og:description" content="Information about Support and contact details.">
    <title>{ Support }</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/htmx.org@1.6.1"></script>
    <style>
        body, html {
            overflow: hidden;
            background-color: black;
            color: white;
        }

        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.05;
            z-index: 0;
        }

        .social-link {
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }

        .social-link:hover {
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.6);
        }

        .pfp {
            margin-top: 50px;
            border-radius: 50%;
        }
    </style>
</head>
<body class="h-screen font-mono" id="body" oncontextmenu="return false;" onkeydown="return disableShortcuts(event);">
    <div class="noise"></div>
    <div class="main" id="content">
        <main class="rounded-lg p-4 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
            <div class="intial-container">
                <img src="https://killwith.fun/img/support.png" class="pfp" alt="support">
                <h1 class="color-main text-3xl">Support <span class="dot text-green-500 blink" id="status-dot">â€¢</span></h1>
                <a href="https://www.imood.com/users/support"><img src="https://moods.imood.com/display/uname-support/fg-white/bg-black/trans-1/imood.gif" alt="The current mood of support at www.imood.com" border="0"></a>
                <p>ela <3</p>
                <br/>
                <div class="music-status" id="music-status">
                    <p>currently not playing...</p>
                </div>
                <hr class="my-4 border-gray-600">
                <h2 class="text-2xl">Socials</h2>
                <ul class="list-none p-4 socials">
                    <li class="mt-4">
                        <strong class="color-main text-lg"><i class="fab fa-discord"></i> Discord</strong> - 
                        <a href="https://discordapp.com/users/246383236744347648" target="_blank" class="text-gray-300 social-link">c8hn</a>
                    </li>
                    <li class="mt-4">
                        <strong class="color-main text-lg"><i class="fab fa-github"></i> Github</strong> - 
                        <a href="https://github.com/dk6m" class="text-gray-300 social-link">dk6m</a> 
                    </li>
                </ul>
                <hr class="my-4 border-gray-600">
                <p class="text-xl">~ Most things have both good and bad; find the balance and act wisely. ~</p>
                <hr class="my-4 border-gray-600">
            </div>
        </main>
    </div>

    <script>
        const userId = "246383236744347648";
        const statusDot = document.getElementById("status-dot");
        const musicStatusElement = document.getElementById("music-status");

        async function fetchPresence() {
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${userId}`);
                const data = await response.json();

                if (data.success && data.data) {
                    const presence = data.data;
                    const discordStatus = presence.discord_status;

                    switch (discordStatus) {
                        case "online":
                            statusDot.style.color = "#22C55E";
                            break;
                        case "idle":
                            statusDot.style.color = "#FACC15";
                            break;
                        case "dnd":
                            statusDot.style.color = "#EF4444";
                            break;
                        default:
                            statusDot.style.color = "#6B7280";
                    }

                    if (presence.listening_to_spotify && presence.spotify) {
                        const spotify = presence.spotify;
                        const songInfo = `
                            <div style="display: flex; align-items: center;">
                                <img src="${spotify.album_art_url}" alt="Album art" style="width: 50px; height: 50px; margin-right: 10px;">
                                <div>
                                    <p>Listening to <strong>${spotify.song}</strong></p>
                                    <p>by <em>${spotify.artist}</em></p>
                                </div>
                            </div>
                        `;
                        musicStatusElement.innerHTML = songInfo;
                    } else {
                        musicStatusElement.innerHTML = '<p>Currently not playing anything...</p>';
                    }
                }
            } catch (error) {
                musicStatusElement.innerHTML = '<p>Currently not playing anything...</p>';
                console.error("Error fetching presence data:", error);
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            fetchPresence();
            setInterval(fetchPresence, 1000);
        });

        function disableShortcuts(event) {
            if (event.keyCode === 123 || (event.ctrlKey && event.shiftKey && event.keyCode === 73) || (event.ctrlKey && event.shiftKey && event.keyCode === 67) || (event.ctrlKey && event.keyCode === 85)) {
                event.preventDefault();
                return false;
            }
        }
    </script>
</body>
</html>
